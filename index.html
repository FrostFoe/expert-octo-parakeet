<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ï - ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶è‡¶¨‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ-‡¶¨‡¶æ‡¶®‡ßç‡¶ß‡¶¨ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡•§ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞, ‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶∏‡¶π‡•§"
    />
    <meta
      name="keywords"
      content="‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ, MCQ, ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ï, Be Examiner, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ"
    />
    <meta name="author" content="Be Examiner Team" />
    <title>
      ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ï - Be Examiner | ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ
    </title>
    <link
      rel="icon"
      type="image/x-icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Load Font Awesome from CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- Load Tailwind from CDN (play CDN for dev/prototyping) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              hind: ["Hind Siliguri", "sans-serif"],
            },
            backgroundImage: {
              "gradient-primary":
                "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
              "gradient-secondary":
                "linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",
              "gradient-accent":
                "linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)",
            },
          },
        },
      };
    </script>
    <style>
      .glass-morphism {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .glass-morphism-strong {
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
      }

      .text-gradient {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .radio-custom::before {
        content: attr(value);
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 12px;
        color: #667eea;
        font-weight: bold;
        pointer-events: none;
      }

      .radio-custom:checked {
        background-color: #667eea;
        border-color: #667eea;
      }

      .radio-custom:checked::before {
        color: white;
      }

      .checkbox-custom::after {
        content: "\f00c";
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 12px;
      }

      input[type="checkbox"]:checked + span {
        background-color: #667eea;
        border-color: #667eea;
      }

      input[type="checkbox"]:checked + span::after {
        content: "\f00c";
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 12px;
      }

      .timer-icon::before {
        content: "\f017";
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        margin-right: 8px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

      .loading-spinner::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 20px;
        height: 20px;
        margin: -10px 0 0 -10px;
        border: 2px solid transparent;
        border-top: 2px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @media (max-width: 640px) {
        body {
          padding: 0.25rem;
        }

        #floating-summary {
          bottom: 0.75rem;
          right: 0.75rem;
          left: auto;
          width: 2.5rem;
          height: 2.5rem;
        }

        #floating-summary i {
          font-size: 0.875rem;
        }

        #summary-content {
          bottom: 3rem !important;
          left: 0.75rem !important;
          width: 120px !important;
          max-height: 120px !important;
          z-index: 9999 !important;
        }

        #timer {
          position: sticky;
          top: 0;
          z-index: 100;
          margin-bottom: 0.75rem;
          padding: 0.5rem;
          font-size: 0.875rem;
          border-radius: 0.5rem;
        }

        .mb-4 {
          margin-bottom: 1rem;
        }

        .mb-6 {
          margin-bottom: 1.5rem;
        }

        .mr-4 {
          margin-right: 0.5rem;
        }

        .mcq-container .flex {
          flex-direction: column;
          align-items: flex-start;
        }

        .mcq-container .flex-1 {
          width: 100%;
          margin-bottom: 0.5rem;
        }

        .mcq-container .flex-wrap {
          justify-content: center;
          gap: 0.25rem;
        }

        .radio-custom {
          width: 1.5rem;
          height: 1.5rem;
          margin: 0.125rem;
        }

        .grid-cols-6 {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.5rem;
        }

        .grid-cols-6 > div:nth-child(n + 5) {
          grid-column: span 2;
        }

        .grid-cols-4 {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.5rem;
        }

        .text-center .inline-flex {
          display: block;
          width: 100%;
          margin-bottom: 0.25rem;
        }

        .text-center .inline-flex:last-child {
          margin-bottom: 0;
        }
      }

      @media (min-width: 641px) and (max-width: 768px) {
        #floating-summary {
          bottom: 1.5rem;
          left: 1.5rem;
        }

        .grid-cols-6 {
          grid-template-columns: repeat(3, 1fr);
        }

        .grid-cols-4 {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 769px) and (max-width: 1024px) {
        .grid-cols-6 {
          grid-template-columns: repeat(4, 1fr);
        }

        .grid-cols-6 > div:last-child {
          grid-column: span 2;
        }
      }

      @media (min-width: 1025px) {
        .max-w-\[900px\] {
          max-width: 1000px;
        }

        .grid-cols-6 {
          grid-template-columns: repeat(6, 1fr);
        }
      }

      @media print {
        body * {
          visibility: hidden;
        }

        #result-section,
        #result-section * {
          visibility: visible;
        }

        #result-section {
          position: absolute;
          left: 0;
          top: 0;
        }

        .no-print {
          display: none !important;
        }
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      button:focus-visible,
      input:focus-visible,
      select:focus-visible,
      textarea:focus-visible {
        outline: 2px solid #667eea;
        outline-offset: 2px;
      }

      @media (hover: none) and (pointer: coarse) {
        .radio-custom {
          width: 2.5rem;
          height: 2.5rem;
        }

        button {
          min-height: 44px;
          padding: 0.75rem 1rem;
        }

        #floating-summary {
          width: 4rem;
          height: 4rem;
        }
      }

      @media (prefers-contrast: high) {
        .glass-morphism {
          backdrop-filter: none;
          background: rgba(255, 255, 255, 0.95);
          border: 1px solid #000;
        }

        .text-gradient {
          background: none;
          color: #000;
          -webkit-text-fill-color: #000;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      .break-words {
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      @media (max-width: 640px) {
        html {
          scroll-behavior: smooth;
        }

        body {
          -webkit-overflow-scrolling: touch;
        }
      }

      #summary-content {
        position: fixed !important;
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(4px) !important;
        -webkit-backdrop-filter: blur(4px) !important;
        border: 2px solid #10b981 !important;
        border-radius: 8px !important;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1) !important;
        z-index: 9999 !important;
        max-height: 160px !important;
        overflow-y: auto !important;
        padding: 6px !important;
      }

      #summary-content > div {
        display: inline-block !important;
        width: 20px !important;
        height: 20px !important;
        margin: 1px !important;
        border: 1px solid #d1d5db !important;
        text-align: center !important;
        line-height: 18px !important;
        cursor: pointer !important;
        border-radius: 4px !important;
        font-weight: bold !important;
        font-size: 10px !important;
        transition: all 0.3s ease !important;
        background-color: #e5e7eb !important;
        color: #374151 !important;
      }

      @media (min-width: 640px) {
        #summary-content {
          max-height: 192px !important;
          padding: 8px !important;
        }

        #summary-content > div {
          width: 24px !important;
          height: 24px !important;
          margin: 2px !important;
          line-height: 22px !important;
          font-size: 12px !important;
          border-radius: 6px !important;
        }
      }

      #summary-content > div:hover {
        transform: scale(1.1) !important;
      }

      #summary-content > div.bg-green-500 {
        background-color: #10b981 !important;
        color: white !important;
      }
    </style>
  </head>

  <body
    class="font-hind m-0 min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 text-gray-800 text-base leading-relaxed antialiased subpixel-antialiased"
  >
    <!-- App Header -->
    <header
      class="bg-white shadow-lg border-b border-gray-200 sticky top-0 z-50"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          <div class="flex items-center space-x-3">
            <div class="bg-gradient-primary p-2 rounded-lg">
              <i class="fas fa-graduation-cap text-white text-xl"></i>
            </div>
            <div>
              <h1 class="text-xl sm:text-2xl font-bold text-gradient font-hind">
                ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ï
              </h1>
              <p class="text-sm text-gray-600 font-hind">Be Examiner</p>
            </div>
          </div>
          <div class="hidden sm:flex items-center space-x-4">
            <div class="text-sm text-gray-600">
              <i class="fas fa-clock mr-1"></i>
              <span id="current-time"></span>
            </div>
            <div class="text-sm text-gray-600">
              <i class="fas fa-calendar mr-1"></i>
              <span id="current-date"></span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-6 focus:left-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 font-hind"
    >
      ‡¶Æ‡ßÇ‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶Ø‡¶æ‡¶®
    </a>

    <main id="main-content" class="flex-1">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12">
        <section
          id="configuration-section"
          class="bg-white/95 backdrop-blur-sm rounded-xl sm:rounded-2xl shadow-xl border border-white/30 mb-6 sm:mb-8 lg:mb-12"
          role="main"
          aria-labelledby="config-heading"
        >
          <div class="p-4 sm:p-6 lg:p-8">
            <h1
              id="config-heading"
              class="text-center text-gray-800 text-2xl sm:text-3xl md:text-4xl font-semibold mb-6 md:mb-8 text-gradient font-hind"
            >
              <i class="fas fa-cog text-gradient mr-2.5" aria-hidden="true"></i>
              ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
            </h1>
            <form
              id="test-form"
              role="form"
              aria-label="Test configuration form"
            >
              <div class="mb-4 sm:mb-6">
                <label
                  for="test-name"
                  class="block mb-2 font-medium text-gray-700 text-sm sm:text-base font-hind"
                  ><i
                    class="fas fa-file-signature text-blue-600 mr-2 w-4"
                    aria-hidden="true"
                  ></i>
                  ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ:</label
                >
                <div class="relative">
                  <input
                    type="text"
                    id="test-name"
                    name="test-name"
                    required
                    placeholder="‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-white/30 rounded-xl bg-white/80 glass-morphism text-sm sm:text-base transition-all duration-300 focus:outline-none focus:border-blue-600 focus:shadow-lg focus:shadow-blue-600/30 focus:-translate-y-0.5 font-hind"
                    aria-describedby="test-name-help"
                  />
                  <div id="test-name-help" class="sr-only">
                    Enter the name for your exam
                  </div>
                </div>
              </div>
              <div class="mb-4 sm:mb-6">
                <label
                  for="mcq-number"
                  class="block mb-2 font-medium text-gray-700 text-sm sm:text-base font-hind"
                  ><i
                    class="fas fa-list-ol text-blue-600 mr-2 w-4"
                    aria-hidden="true"
                  ></i>
                  MCQ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ:</label
                >
                <div class="relative">
                  <input
                    type="number"
                    id="mcq-number"
                    name="mcq-number"
                    required
                    placeholder="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                    min="1"
                    max="100"
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-white/30 rounded-xl bg-white/80 glass-morphism text-sm sm:text-base transition-all duration-300 focus:outline-none focus:border-blue-600 focus:shadow-lg focus:shadow-blue-600/30 focus:-translate-y-0.5 font-hind"
                    aria-describedby="mcq-number-help"
                  />
                  <div id="mcq-number-help" class="sr-only">
                    Enter the number of MCQ questions (1-100)
                  </div>
                </div>
              </div>
              <div class="mb-4 sm:mb-6">
                <label
                  for="time-limit"
                  class="block mb-2 font-medium text-gray-700 text-sm sm:text-base font-hind"
                  ><i
                    class="fas fa-clock text-blue-600 mr-2 w-4"
                    aria-hidden="true"
                  ></i>
                  ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ (‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá):</label
                >
                <div class="relative">
                  <input
                    type="number"
                    id="time-limit"
                    name="time-limit"
                    required
                    placeholder="‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                    min="1"
                    max="300"
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-white/30 rounded-xl bg-white/80 glass-morphism text-sm sm:text-base transition-all duration-300 focus:outline-none focus:border-blue-600 focus:shadow-lg focus:shadow-blue-600/30 focus:-translate-y-0.5 font-hind"
                    aria-describedby="time-limit-help"
                  />
                  <div id="time-limit-help" class="sr-only">
                    Enter the time limit in minutes (1-300)
                  </div>
                </div>
              </div>
              <div class="mb-4 sm:mb-6">
                <label
                  for="marks-per-question"
                  class="block mb-2 font-medium text-gray-700 text-sm sm:text-base font-hind"
                  ><i
                    class="fas fa-star text-blue-600 mr-2 w-4"
                    aria-hidden="true"
                  ></i>
                  ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:</label
                >
                <div class="relative">
                  <input
                    type="number"
                    id="marks-per-question"
                    name="marks-per-question"
                    required
                    placeholder="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                    min="0"
                    step="0.5"
                    value="1"
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-white/30 rounded-xl bg-white/80 glass-morphism text-sm sm:text-base transition-all duration-300 focus:outline-none focus:border-blue-600 focus:shadow-lg focus:shadow-blue-600/30 focus:-translate-y-0.5 font-hind"
                    aria-describedby="marks-per-question-help"
                  />
                  <div id="marks-per-question-help" class="sr-only">
                    Enter marks per question (minimum 0)
                  </div>
                </div>
              </div>
              <div class="mb-4 sm:mb-6">
                <label
                  for="negative-marking-value"
                  class="block mb-2 font-medium text-gray-700 text-sm sm:text-base font-hind"
                  ><i
                    class="fas fa-minus-circle text-blue-600 mr-2 w-4"
                    aria-hidden="true"
                  ></i>
                  ‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç ‡¶Æ‡¶æ‡¶® (‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø):</label
                >
                <div class="relative">
                  <input
                    type="number"
                    id="negative-marking-value"
                    name="negative-marking-value"
                    placeholder="‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç ‡¶Æ‡¶æ‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (0 = ‡¶¨‡¶®‡ßç‡¶ß)"
                    min="0"
                    step="0.25"
                    value="0.25"
                    class="w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-white/30 rounded-xl bg-white/80 glass-morphism text-sm sm:text-base transition-all duration-300 focus:outline-none focus:border-blue-600 focus:shadow-lg focus:shadow-blue-600/30 focus:-translate-y-0.5 font-hind"
                    aria-describedby="negative-marking-help"
                  />
                  <div id="negative-marking-help" class="sr-only">
                    Enter negative marking value per question (0 to disable)
                  </div>
                </div>
              </div>
              <button
                type="submit"
                class="block w-full py-2.5 sm:py-3.5 px-4 text-sm sm:text-base font-bold border-none rounded-xl bg-gradient-primary text-white cursor-pointer text-center transition-all duration-300 shadow-lg shadow-blue-600/30 hover:shadow-xl hover:shadow-blue-600/40 hover:-translate-y-1 active:translate-y-0 active:shadow-lg active:shadow-blue-600/30 mt-4 touch-manipulation font-hind"
                aria-label="Start the exam"
              >
                <i class="fas fa-play mr-2" aria-hidden="true"></i> ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ
                ‡¶ï‡¶∞‡ßÅ‡¶®
              </button>
            </form>
            <div class="text-center mt-4">
              <button
                id="view-history"
                class="inline-flex items-center px-4 sm:px-6 py-2 sm:py-3 bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 font-hind text-sm sm:text-lg"
                aria-label="View exam history"
              >
                <i class="fas fa-history mr-2" aria-hidden="true"></i> ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏
                ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
              </button>
            </div>
          </div>
        </section>

        <section
          id="test-section"
          class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 hidden"
          role="main"
          aria-labelledby="test-heading"
        >
          <div
            class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8"
          >
            <!-- Test Header -->
            <div
              class="bg-white rounded-2xl shadow-xl border border-gray-200 p-4 sm:p-6 mb-6 sm:mb-8"
            >
              <div
                class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"
              >
                <div class="flex-1">
                  <h2
                    id="test-heading"
                    class="text-2xl sm:text-3xl font-bold text-gray-800 font-hind mb-2"
                  >
                    <i class="fas fa-clipboard-check text-blue-600 mr-3"></i>
                    ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá
                  </h2>
                  <p class="text-gray-600 font-hind text-sm sm:text-base">
                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                    ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶ß‡¶æ‡¶®‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü
                    ‡¶ï‡¶∞‡ßÅ‡¶®
                  </p>
                </div>
                <div class="flex items-center gap-4">
                  <div
                    class="bg-blue-50 border border-blue-200 rounded-xl px-4 py-3"
                  >
                    <div
                      class="text-xs text-blue-600 font-semibold font-hind mb-1"
                    >
                      ‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º
                    </div>
                    <div
                      class="text-lg sm:text-xl font-bold text-blue-700 font-mono"
                      id="timer-compact"
                    ></div>
                  </div>
                  <div
                    class="bg-green-50 border border-green-200 rounded-xl px-4 py-3"
                  >
                    <div
                      class="text-xs text-green-600 font-semibold font-hind mb-1"
                    >
                      ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
                    </div>
                    <div
                      class="text-lg sm:text-xl font-bold text-green-700"
                      id="answered-count"
                    >
                      0
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Test Details -->
            <div
              class="bg-white rounded-2xl shadow-lg border border-gray-200 p-4 sm:p-6 mb-6 sm:mb-8"
              id="test-details"
            ></div>

            <!-- Questions Container -->
            <div
              class="space-y-4 sm:space-y-6"
              id="mcq-container"
              role="radiogroup"
              aria-label="Multiple choice questions"
            ></div>

            <!-- Submit Section -->
            <div
              class="mt-8 sm:mt-12 bg-white rounded-2xl shadow-xl border border-gray-200 p-4 sm:p-6"
            >
              <div class="text-center">
                <div
                  class="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6"
                >
                  <div
                    class="flex items-center justify-center gap-3 text-amber-800"
                  >
                    <i class="fas fa-exclamation-triangle text-xl"></i>
                    <div>
                      <div class="font-semibold font-hind">
                        ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶π‡ßã‡¶®
                      </div>
                      <div class="text-sm font-hind mt-1">
                        ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  id="submit-test"
                  class="inline-flex items-center px-8 sm:px-12 py-4 sm:py-5 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold rounded-xl shadow-xl shadow-green-600/30 transition-all duration-300 hover:shadow-2xl hover:shadow-green-600/40 hover:-translate-y-1 text-lg sm:text-xl font-hind"
                  aria-label="Submit the test"
                >
                  <i class="fas fa-paper-plane mr-3"></i>
                  ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
                </button>
              </div>
            </div>
          </div>

          <!-- Floating Summary Button -->
          <div
            id="floating-summary"
            class="fixed bottom-6 right-6 sm:bottom-8 sm:right-8 w-14 h-14 sm:w-16 sm:h-16 bg-gradient-primary border-4 border-white rounded-full shadow-2xl flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-110 z-50 touch-manipulation"
            role="button"
            aria-label="Toggle question summary"
            tabindex="0"
          >
            <i class="fas fa-list-check text-white text-lg sm:text-xl"></i>
          </div>

          <section
            id="correct-answer-section"
            class="bg-white/95 backdrop-blur-sm rounded-xl sm:rounded-2xl shadow-xl border border-white/30 mb-6 sm:mb-8 lg:mb-12 hidden"
            role="main"
            aria-labelledby="correct-answer-heading"
          >
            <div class="p-4 sm:p-6 lg:p-8">
              <h2
                id="correct-answer-heading"
                class="text-gray-800 font-semibold mb-4 sm:mb-6 font-hind text-lg sm:text-xl"
              >
                <i
                  class="fas fa-check-circle text-blue-600 mr-2"
                  aria-hidden="true"
                ></i>
                ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
              </h2>
              <div
                id="correct-answer-container"
                role="radiogroup"
                aria-label="Correct answer selection"
              ></div>
              <p
                id="warning-message"
                class="bg-red-50 border-2 border-red-300 rounded-xl p-3 sm:p-4 my-4 text-red-700 font-semibold text-center font-hind text-sm sm:text-base hidden"
                role="alert"
                aria-live="polite"
              >
                ‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶•‡¶æ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá
                ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§
              </p>

              <button
                id="submit-correct-answers"
                class="bg-gradient-accent text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-bold shadow-xl shadow-pink-600/30 transition-all duration-300 hover:shadow-2xl hover:shadow-pink-600/40 hover:-translate-y-1 font-hind text-base sm:text-lg"
                disabled
                aria-label="Submit correct answers"
              >
                <i class="fas fa-check-double mr-2" aria-hidden="true"></i> ‡¶∏‡¶†‡¶ø‡¶ï
                ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
              </button>
            </div>
          </section>

          <section
            id="result-section"
            class="bg-white/95 backdrop-blur-sm rounded-xl sm:rounded-2xl shadow-xl border border-white/30 mb-6 sm:mb-8 lg:mb-12 hidden"
            role="main"
            aria-labelledby="result-heading"
          >
            <div class="p-4 sm:p-6 lg:p-8">
              <h2
                id="result-heading"
                class="text-gray-800 font-semibold mb-4 sm:mb-6 font-hind text-lg sm:text-xl md:text-2xl"
              >
                <i
                  class="fas fa-chart-bar text-blue-600 mr-2"
                  aria-hidden="true"
                ></i>
                ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤
              </h2>
              <div
                id="result-container"
                role="region"
                aria-label="Exam results"
              ></div>
              <div
                class="mt-6 sm:mt-8 space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:justify-center sm:gap-4 no-print"
              >
                <button
                  id="save-test"
                  class="w-full sm:w-auto sm:flex-1 sm:max-w-xs inline-flex items-center justify-center px-4 sm:px-6 py-3 sm:py-3 bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 font-hind text-sm sm:text-base"
                  aria-label="Save test results"
                >
                  <i class="fas fa-save mr-2" aria-hidden="true"></i> ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ
                  ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
                <button
                  id="print-result"
                  class="w-full sm:w-auto sm:flex-1 sm:max-w-xs inline-flex items-center justify-center px-4 sm:px-6 py-3 sm:py-3 bg-gradient-primary text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 font-hind text-sm sm:text-base"
                  aria-label="Print results"
                >
                  <i class="fas fa-print mr-2" aria-hidden="true"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü
                  ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
                <button
                  id="restart-btn"
                  class="w-full sm:w-auto sm:flex-1 sm:max-w-xs inline-flex items-center justify-center px-4 sm:px-6 py-3 sm:py-3 bg-gradient-primary text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 font-hind text-sm sm:text-base"
                  aria-label="Start new exam"
                >
                  <i class="fas fa-redo mr-2" aria-hidden="true"></i> ‡¶®‡¶§‡ßÅ‡¶®
                  ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
              </div>
            </div>
          </section>

          <section
            id="history-section"
            class="bg-white/95 backdrop-blur-sm rounded-xl sm:rounded-2xl shadow-xl border border-white/30 mb-6 sm:mb-8 lg:mb-12 hidden"
            role="main"
            aria-labelledby="history-heading"
          >
            <div class="p-4 sm:p-6 lg:p-8">
              <h2
                id="history-heading"
                class="text-gray-800 font-semibold mb-4 sm:mb-6 font-hind text-lg sm:text-xl"
              >
                <i
                  class="fas fa-history text-blue-600 mr-2"
                  aria-hidden="true"
                ></i>
                ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏
              </h2>
              <div class="text-center mb-4">
                <button
                  id="back-to-home"
                  class="inline-flex items-center px-4 sm:px-6 py-2 sm:py-3 bg-gray-500 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 font-hind text-sm sm:text-lg"
                  aria-label="Return to home"
                >
                  <i class="fas fa-home mr-2" aria-hidden="true"></i> ‡¶π‡ßã‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá
                  ‡¶Ø‡¶æ‡¶®
                </button>
              </div>
              <div
                id="history-container"
                role="region"
                aria-label="Exam history"
              ></div>
            </div>
          </section>
        </section>
      </div>
    </main>

    <!-- App Footer -->
    <footer class="bg-gray-900 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div>
            <div class="flex items-center space-x-2 mb-4">
              <div class="bg-gradient-primary p-2 rounded-lg">
                <i class="fas fa-graduation-cap text-white"></i>
              </div>
              <span class="text-lg font-bold font-hind"
                >‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ï</span
              >
            </div>
            <p class="text-gray-400 text-sm font-hind">
              ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶π‡¶ú ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞‡ßÄ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ø‡¶æ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï ‡¶è‡¶¨‡¶Ç
              ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
            </p>
          </div>
          <div>
            <h3 class="text-lg font-semibold mb-4 font-hind">‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
            <ul class="space-y-2 text-gray-400 text-sm font-hind">
              <li>
                <i class="fas fa-check text-green-400 mr-2"></i>‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º
                ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞
              </li>
              <li>
                <i class="fas fa-check text-green-400 mr-2"></i>‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç
              </li>
              <li>
                <i class="fas fa-check text-green-400 mr-2"></i>‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£
              </li>
              <li>
                <i class="fas fa-check text-green-400 mr-2"></i>‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏
              </li>
            </ul>
          </div>
          <div>
            <h3 class="text-lg font-semibold mb-4 font-hind">‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</h3>
            <div class="space-y-2 text-gray-400 text-sm">
              <p class="flex items-center font-hind">
                <i class="fas fa-envelope mr-2"></i>
                support@beexaminer.com
              </p>
              <p class="flex items-center font-hind">
                <i class="fas fa-globe mr-2"></i>
                www.beexaminer.com
              </p>
              <p class="flex items-center font-hind">
                <i class="fas fa-code mr-2"></i>
                Open Source Project
              </p>
            </div>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center">
          <p class="text-gray-400 text-sm font-hind">
            &copy; 2025 ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ï - Be Examiner. All rights reserved.
          </p>
        </div>
      </div>
    </footer>
    <script>
      class ExamApp {
        constructor() {
          this.testData = {
            name: "",
            mcqNumber: 0,
            timeLimit: 0,
            marksPerQuestion: 1,
            negativeMarkingValue: 0.25,
          };
          this.timer = null;
          this.retakeData = null;
          this.summaryVisible = false;
          this.eventListeners = new Map();

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.showSection("configuration-section");
        }
        showSection(sectionId) {
          const sections = [
            "configuration-section",
            "test-section",
            "correct-answer-section",
            "result-section",
            "history-section",
          ];
          sections.forEach((id) => {
            const element = document.getElementById(id);
            if (element) {
              element.classList.add("hidden");
              element.setAttribute("aria-hidden", "true");
            }
          });

          const targetSection = document.getElementById(sectionId);
          if (targetSection) {
            targetSection.classList.remove("hidden");
            targetSection.removeAttribute("aria-hidden");
          }
        }
        safeLocalStorageGet(key, defaultValue = null) {
          try {
            const item = localStorage.getItem(key);
            return item ? JSON.parse(item) : defaultValue;
          } catch (error) {
            console.error("Error reading from localStorage:", error);
            return defaultValue;
          }
        }

        safeLocalStorageSet(key, value) {
          try {
            localStorage.setItem(key, JSON.stringify(value));
            return true;
          } catch (error) {
            console.error("Error writing to localStorage:", error);
            alert("Failed to save data. Storage might be full.");
            return false;
          }
        }
        addEventListener(elementId, event, handler) {
          const element = document.getElementById(elementId);
          if (element) {
            element.addEventListener(event, handler);
            if (!this.eventListeners.has(elementId)) {
              this.eventListeners.set(elementId, []);
            }
            this.eventListeners.get(elementId).push({ event, handler });
          }
        }

        removeEventListeners(elementId) {
          const listeners = this.eventListeners.get(elementId);
          if (listeners) {
            const element = document.getElementById(elementId);
            if (element) {
              listeners.forEach(({ event, handler }) => {
                element.removeEventListener(event, handler);
              });
            }
            this.eventListeners.delete(elementId);
          }
        }
        handleFormSubmit(event) {
          event.preventDefault();

          try {
            this.testData.name = document
              .getElementById("test-name")
              .value.trim();
            this.testData.mcqNumber = parseInt(
              document.getElementById("mcq-number").value,
            );
            this.testData.timeLimit = parseInt(
              document.getElementById("time-limit").value,
            );
            this.testData.marksPerQuestion = parseFloat(
              document.getElementById("marks-per-question").value,
            );
            this.testData.negativeMarkingValue = parseFloat(
              document.getElementById("negative-marking-value").value,
            );
            if (!this.testData.name) {
              alert("‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§");
              return;
            }
            if (this.testData.mcqNumber < 1 || this.testData.mcqNumber > 100) {
              alert("‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ 1 ‡¶•‡ßá‡¶ï‡ßá 100 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
              return;
            }

            this.showSection("test-section");
            this.generateTestInterface();
            this.startTimer();
          } catch (error) {
            alert("‡¶´‡¶∞‡ßç‡¶Æ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶ï‡¶ü‡¶ø ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶ò‡¶ü‡ßá‡¶õ‡ßá.");
          }
        }
        generateTestInterface() {
          this.generateTestDetails();
          this.generateMCQs();
          this.setupFloatingSummary();
        }

        generateTestDetails() {
          const testDetails = document.getElementById("test-details");
          if (!testDetails) return;

          testDetails.innerHTML = `
            <div class="bg-blue-50 p-3 sm:p-4 md:p-6 rounded-xl border border-blue-200">
              <h3 class="text-xl sm:text-2xl md:text-3xl font-bold text-blue-600 mb-4 sm:mb-6 text-center font-hind">
                <i class="fas fa-clipboard-list text-blue-600 mr-2 text-lg sm:text-xl md:text-2xl"></i>
                ${this.escapeHtml(this.testData.name)}
                <i class="fas fa-clipboard-list text-blue-600 ml-2 text-lg sm:text-xl md:text-2xl"></i>
              </h3>
              <div class="grid grid-cols-3 sm:grid-cols-4 gap-2 sm:gap-3 md:gap-4">
                <div class="bg-white p-2 sm:p-3 md:p-4 rounded-lg border border-blue-200 text-center shadow-sm hover:shadow-md transition-shadow">
                  <div class="bg-blue-500 text-white p-1.5 sm:p-2 rounded-full mb-1 sm:mb-2 inline-block">
                    <i class="fas fa-list text-sm sm:text-base md:text-lg"></i>
                  </div>
                  <div class="font-semibold text-gray-700 text-xs sm:text-sm mb-1 font-hind">‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                  <div class="text-lg sm:text-xl md:text-2xl font-bold text-blue-600">${this.testData.mcqNumber}</div>
                </div>
                <div class="bg-white p-2 sm:p-3 md:p-4 rounded-lg border border-green-200 text-center shadow-sm hover:shadow-md transition-shadow">
                  <div class="bg-green-500 text-white p-1.5 sm:p-2 rounded-full mb-1 sm:mb-2 inline-block">
                    <i class="fas fa-hourglass-half text-sm sm:text-base md:text-lg"></i>
                  </div>
                  <div class="font-semibold text-gray-700 text-xs sm:text-sm mb-1 font-hind">‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ</div>
                  <div class="text-lg sm:text-xl md:text-2xl font-bold text-green-600">${this.testData.timeLimit} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</div>
                </div>
                <div class="bg-white p-2 sm:p-3 md:p-4 rounded-lg border border-yellow-200 text-center shadow-sm hover:shadow-md transition-shadow">
                  <div class="bg-yellow-500 text-white p-1.5 sm:p-2 rounded-full mb-1 sm:mb-2 inline-block">
                    <i class="fas fa-star text-sm sm:text-base md:text-lg"></i>
                  </div>
                  <div class="font-semibold text-gray-700 text-xs sm:text-sm mb-1 font-hind">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞</div>
                  <div class="text-lg sm:text-xl md:text-2xl font-bold text-yellow-600">${this.testData.marksPerQuestion}</div>
                </div>
                <div class="bg-white p-2 sm:p-3 md:p-4 rounded-lg border border-red-200 text-center shadow-sm hover:shadow-md transition-shadow col-span-3 sm:col-span-1">
                  <div class="bg-red-500 text-white p-1.5 sm:p-2 rounded-full mb-1 sm:mb-2 inline-block">
                    <i class="fas fa-exclamation-triangle text-sm sm:text-base md:text-lg"></i>
                  </div>
                  <div class="font-semibold text-gray-700 text-xs sm:text-sm mb-1 font-hind">‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç</div>
                  <div class="text-lg sm:text-xl md:text-2xl font-bold text-red-600">${this.testData.negativeMarkingValue > 0 ? this.testData.negativeMarkingValue : "‡¶¨‡¶®‡ßç‡¶ß"}</div>
                </div>
              </div>
            </div>
          `;
        }

        generateMCQs() {
          const mcqContainer = document.getElementById("mcq-container");
          if (!mcqContainer) return;

          mcqContainer.innerHTML = "";

          for (let i = 1; i <= this.testData.mcqNumber; i++) {
            const mcqDiv = document.createElement("div");
            mcqDiv.className =
              "flex flex-col md:flex-row md:items-center justify-between mb-2 sm:mb-3 md:mb-4 lg:mb-5 gap-2 sm:gap-3 md:gap-4 p-2 sm:p-3 md:p-4 lg:p-5 border border-white/30 rounded-lg sm:rounded-xl bg-white/80 glass-morphism shadow-md sm:shadow-lg transition-all duration-300 hover:shadow-lg sm:hover:shadow-xl hover:-translate-y-0.5";
            mcqDiv.setAttribute("id", `mcq-${i}`);

            const checkedA =
              this.retakeData && this.retakeData.userAns[i - 1] === "A"
                ? "checked"
                : "";
            const checkedB =
              this.retakeData && this.retakeData.userAns[i - 1] === "B"
                ? "checked"
                : "";
            const checkedC =
              this.retakeData && this.retakeData.userAns[i - 1] === "C"
                ? "checked"
                : "";
            const checkedD =
              this.retakeData && this.retakeData.userAns[i - 1] === "D"
                ? "checked"
                : "";

            mcqDiv.innerHTML = `
              <p class="flex-1 md:mr-4 font-semibold text-gray-700 mb-1 sm:mb-2 md:mb-0 min-w-0 font-hind text-xs sm:text-sm md:text-base">
                <i class="fas fa-question-circle text-blue-600 mr-1 sm:mr-2 text-xs sm:text-sm" aria-hidden="true"></i>
                ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${i}:
              </p>
              <div class="flex gap-1 sm:gap-2 md:gap-3 flex-wrap md:flex-nowrap items-center justify-center sm:justify-start" role="radiogroup" aria-label="Question ${i} options">
                <input type="radio" name="q${i}" value="A" class="radio-custom w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 relative m-0.5 sm:m-1 md:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[16px] sm:min-w-[20px] md:min-w-[24px] flex-shrink-0" ${checkedA} aria-label="Option A">
                <input type="radio" name="q${i}" value="B" class="radio-custom w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 relative m-0.5 sm:m-1 md:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[16px] sm:min-w-[20px] md:min-w-[24px] flex-shrink-0" ${checkedB} aria-label="Option B">
                <input type="radio" name="q${i}" value="C" class="radio-custom w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 relative m-0.5 sm:m-1 md:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[16px] sm:min-w-[20px] md:min-w-[24px] flex-shrink-0" ${checkedC} aria-label="Option C">
                <input type="radio" name="q${i}" value="D" class="radio-custom w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 relative m-0.5 sm:m-1 md:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[16px] sm:min-w-[20px] md:min-w-[24px] flex-shrink-0" ${checkedD} aria-label="Option D">
              </div>
            `;
            mcqContainer.appendChild(mcqDiv);
          }
        }

        setupFloatingSummary() {
          const floatingSummary = document.getElementById("floating-summary");
          if (!floatingSummary) return;

          const summaryContent = document.createElement("div");
          summaryContent.id = "summary-content";
          summaryContent.className =
            "fixed bottom-16 left-2 sm:bottom-20 sm:left-5 w-40 sm:w-48 max-h-40 sm:max-h-48 p-2 sm:p-3 bg-white border-2 border-green-500 rounded-xl shadow-xl overflow-y-auto z-50";
          summaryContent.style.display = "none";
          summaryContent.style.backdropFilter = "blur(4px)";
          summaryContent.style.webkitBackdropFilter = "blur(4px)";
          summaryContent.style.backgroundColor = "rgba(255, 255, 255, 0.95)";
          summaryContent.setAttribute("role", "dialog");
          summaryContent.setAttribute("aria-label", "Question summary");
          document.body.appendChild(summaryContent);

          const updateAnsweredCount = () => {
            const answeredCount = document.getElementById("answered-count");
            if (answeredCount) {
              let answered = 0;
              for (let i = 1; i <= this.testData.mcqNumber; i++) {
                if (document.querySelector(`input[name="q${i}"]:checked`)) {
                  answered++;
                }
              }
              answeredCount.textContent = answered;
            }
          };

          this.addEventListener("floating-summary", "click", () => {
            this.summaryVisible = !this.summaryVisible;
            summaryContent.style.display = this.summaryVisible
              ? "block"
              : "none";
            if (this.summaryVisible) this.updateSummary(summaryContent);
          });

          this.addEventListener("floating-summary", "keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              floatingSummary.click();
            }
          });

          // Update answered count when radio buttons change
          for (let i = 1; i <= this.testData.mcqNumber; i++) {
            const radioButtons = document.querySelectorAll(
              `input[name="q${i}"]`,
            );
            radioButtons.forEach((radio) => {
              radio.addEventListener("change", updateAnsweredCount);
            });
          }
        }

        updateSummary(container) {
          if (!container) return;
          container.innerHTML = "";

          for (let i = 1; i <= this.testData.mcqNumber; i++) {
            const isAnswered = document.querySelector(
              `input[name="q${i}"]:checked`,
            );
            const color = isAnswered
              ? "bg-green-500 text-white"
              : "bg-gray-200 text-gray-700";
            const questionBox = document.createElement("div");
            questionBox.className = `inline-block w-6 h-6 sm:w-7 sm:h-7 m-0.5 sm:m-1 border border-gray-300 text-center leading-6 sm:leading-7 cursor-pointer rounded-lg font-bold transition-all duration-300 hover:scale-110 text-xs sm:text-sm ${color}`;
            questionBox.textContent = i;
            questionBox.setAttribute("role", "button");
            questionBox.setAttribute("aria-label", `Go to question ${i}`);
            questionBox.setAttribute("tabindex", "0");
            questionBox.style.display = "inline-block";
            questionBox.style.width = "24px";
            questionBox.style.height = "24px";
            questionBox.style.margin = "2px";
            questionBox.style.border = "1px solid #d1d5db";
            questionBox.style.textAlign = "center";
            questionBox.style.lineHeight = "22px";
            questionBox.style.cursor = "pointer";
            questionBox.style.borderRadius = "6px";
            questionBox.style.fontWeight = "bold";
            questionBox.style.fontSize = "12px";
            questionBox.style.transition = "all 0.3s ease";
            if (isAnswered) {
              questionBox.style.backgroundColor = "#10b981";
              questionBox.style.color = "white";
            } else {
              questionBox.style.backgroundColor = "#e5e7eb";
              questionBox.style.color = "#374151";
            }

            questionBox.addEventListener("click", () => {
              document
                .getElementById(`mcq-${i}`)
                .scrollIntoView({ behavior: "smooth" });
            });

            questionBox.addEventListener("keydown", (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                questionBox.click();
              }
            });

            container.appendChild(questionBox);
          }
        }
        startTimer() {
          const timerDisplay = document.getElementById("timer");
          const timerCompact = document.getElementById("timer-compact");
          const answeredCount = document.getElementById("answered-count");
          if (!timerDisplay || !timerCompact) return;

          let timeRemaining = this.testData.timeLimit * 60;

          if (this.timer) {
            clearInterval(this.timer);
          }

          const updateAnsweredCount = () => {
            if (answeredCount) {
              let answered = 0;
              for (let i = 1; i <= this.testData.mcqNumber; i++) {
                if (document.querySelector(`input[name="q${i}"]:checked`)) {
                  answered++;
                }
              }
              answeredCount.textContent = answered;
            }
          };

          this.timer = setInterval(() => {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timeString = `${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;

            if (timerDisplay)
              timerDisplay.textContent = `‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º: ${minutes}‡¶Æ‡¶ø ${seconds}‡¶∏‡ßá`;
            if (timerCompact) timerCompact.textContent = timeString;
            updateAnsweredCount();

            timeRemaining--;

            if (timeRemaining < 0) {
              clearInterval(this.timer);
              if (timerDisplay) timerDisplay.textContent = "‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑!";
              if (timerDisplay) timerDisplay.classList.add("bg-red-500");
              if (timerDisplay)
                timerDisplay.classList.remove("bg-gradient-accent");
              alert("‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑! ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá‡•§");
              this.submitTest();
            }
          }, 1000);

          // Initial update
          updateAnsweredCount();
        }
        submitTest() {
          this.showSection("correct-answer-section");
          if (this.timer) {
            clearInterval(this.timer);
          }
          this.generateCorrectAnswerInterface();
        }

        generateCorrectAnswerInterface() {
          const correctAnswerContainer = document.getElementById(
            "correct-answer-container",
          );
          if (!correctAnswerContainer) return;

          correctAnswerContainer.innerHTML = "";

          for (let i = 1; i <= this.testData.mcqNumber; i++) {
            const answerDiv = document.createElement("div");
            answerDiv.className =
              "flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-5 gap-2.5 md:gap-4 p-4 md:p-5 border border-white/30 rounded-xl bg-white/80 glass-morphism shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5";

            const checkedA =
              this.retakeData && this.retakeData.correctAns[i - 1] === "A"
                ? "checked"
                : "";
            const checkedB =
              this.retakeData && this.retakeData.correctAns[i - 1] === "B"
                ? "checked"
                : "";
            const checkedC =
              this.retakeData && this.retakeData.correctAns[i - 1] === "C"
                ? "checked"
                : "";
            const checkedD =
              this.retakeData && this.retakeData.correctAns[i - 1] === "D"
                ? "checked"
                : "";

            answerDiv.innerHTML = `
              <p class="flex-1 md:mr-4 font-semibold text-gray-700 mb-2 md:mb-0 min-w-0 font-hind">
                <i class="fas fa-check-circle text-blue-600 mr-2" aria-hidden="true"></i>
                ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${i} ‡¶è‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞:
              </p>
              <div class="flex gap-2 flex-wrap md:flex-nowrap items-center" role="radiogroup" aria-label="Correct answer for question ${i}">
                <input type="radio" name="correct-q${i}" value="A" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${checkedA} aria-label="Correct answer A">
                <input type="radio" name="correct-q${i}" value="B" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${checkedB} aria-label="Correct answer B">
                <input type="radio" name="correct-q${i}" value="C" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${checkedC} aria-label="Correct answer C">
                <input type="radio" name="correct-q${i}" value="D" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${checkedD} aria-label="Correct answer D">
              </div>
            `;
            correctAnswerContainer.appendChild(answerDiv);
          }

          this.setupCorrectAnswerValidation();
        }

        setupCorrectAnswerValidation() {
          const submitButton = document.getElementById(
            "submit-correct-answers",
          );
          const warningMessage = document.getElementById("warning-message");

          if (!submitButton || !warningMessage) return;

          const updateButtonState = () => {
            let allSelected = true;
            for (let i = 1; i <= this.testData.mcqNumber; i++) {
              const selected = document.querySelector(
                `input[name="correct-q${i}"]:checked`,
              );
              if (!selected) {
                allSelected = false;
                break;
              }
            }

            submitButton.disabled = !allSelected;
            submitButton.style.opacity = allSelected ? "1" : "0.5";
            warningMessage.style.display = allSelected ? "none" : "block";
          };
          for (let i = 1; i <= this.testData.mcqNumber; i++) {
            const radioButtons = document.querySelectorAll(
              `input[name="correct-q${i}"]`,
            );
            radioButtons.forEach((radio) => {
              radio.addEventListener("change", updateButtonState);
            });
          }

          updateButtonState();
        }
        submitCorrectAnswers() {
          this.showSection("result-section");
          this.calculateAndDisplayResults();
        }

        calculateAndDisplayResults() {
          const resultContainer = document.getElementById("result-container");
          if (!resultContainer) return;

          let correctCount = 0;
          let incorrectCount = 0;
          let skippedCount = 0;
          const userAnswers = [];
          const correctAnswers = [];

          for (let i = 1; i <= this.testData.mcqNumber; i++) {
            const userAnswer = document.querySelector(
              `input[name="q${i}"]:checked`,
            );
            const correctAnswer = document.querySelector(
              `input[name="correct-q${i}"]:checked`,
            );

            userAnswers.push(userAnswer ? userAnswer.value : "");
            correctAnswers.push(correctAnswer ? correctAnswer.value : "");

            if (!userAnswer) {
              skippedCount++;
            } else if (userAnswer && correctAnswer) {
              if (userAnswer.value === correctAnswer.value) {
                correctCount++;
              } else {
                incorrectCount++;
              }
            }
          }

          const totalScore =
            correctCount * this.testData.marksPerQuestion -
            incorrectCount * this.testData.negativeMarkingValue;
          const percentage = (correctCount / this.testData.mcqNumber) * 100;

          resultContainer.innerHTML = `
            <div class="bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-500 p-4 md:p-6 rounded-xl shadow-xl">
              <h3 class="text-gray-800 font-bold mb-6 font-hind text-xl md:text-2xl text-center">
                <i class="fas fa-chart-pie text-blue-600 mr-2" aria-hidden="true"></i>
                ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤
              </h3>
              <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6">
                <div class="bg-white/90 p-2 sm:p-3 md:p-4 rounded-lg shadow-md text-center">
                  <i class="fas fa-list text-blue-600 text-lg sm:text-xl md:text-2xl lg:text-3xl mb-1 sm:mb-2 block" aria-hidden="true"></i>
                  <div class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl font-bold text-blue-600">${this.testData.mcqNumber}</div>
                  <div class="font-semibold text-gray-700 font-hind text-xs sm:text-xs md:text-sm">‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                </div>
                <div class="bg-white/90 p-2 sm:p-3 md:p-4 rounded-lg shadow-md text-center">
                  <i class="fas fa-check-circle text-green-600 text-lg sm:text-xl md:text-2xl lg:text-3xl mb-1 sm:mb-2 block" aria-hidden="true"></i>
                  <div class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl font-bold text-green-600">${correctCount}</div>
                  <div class="font-semibold text-gray-700 font-hind text-xs sm:text-xs md:text-sm">‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞</div>
                </div>
                <div class="bg-white/90 p-2 sm:p-3 md:p-4 rounded-lg shadow-md text-center">
                  <i class="fas fa-times-circle text-red-600 text-lg sm:text-xl md:text-2xl lg:text-3xl mb-1 sm:mb-2 block" aria-hidden="true"></i>
                  <div class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl font-bold text-red-600">${incorrectCount}</div>
                  <div class="font-semibold text-gray-700 font-hind text-xs sm:text-xs md:text-sm">‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞</div>
                </div>
                <div class="bg-white/90 p-2 sm:p-3 md:p-4 rounded-lg shadow-md text-center">
                  <i class="fas fa-minus-circle text-orange-600 text-lg sm:text-xl md:text-2xl lg:text-3xl mb-1 sm:mb-2 block" aria-hidden="true"></i>
                  <div class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl font-bold text-orange-600">${skippedCount}</div>
                  <div class="font-semibold text-gray-700 font-hind text-xs sm:text-xs md:text-sm">‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                </div>
                <div class="bg-white/90 p-2 sm:p-3 md:p-4 rounded-lg shadow-md text-center">
                  <i class="fas fa-exclamation-triangle text-purple-600 text-lg sm:text-xl md:text-2xl lg:text-3xl mb-1 sm:mb-2 block" aria-hidden="true"></i>
                  <div class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl font-bold text-purple-600">${(incorrectCount * this.testData.negativeMarkingValue).toFixed(2)}</div>
                  <div class="font-semibold text-gray-700 font-hind text-xs sm:text-xs md:text-sm">‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç</div>
                </div>
                <div class="bg-white/90 p-2 sm:p-3 md:p-4 rounded-lg shadow-md text-center">
                  <i class="fas fa-trophy text-yellow-600 text-lg sm:text-xl md:text-2xl lg:text-3xl mb-1 sm:mb-2 block" aria-hidden="true"></i>
                  <div class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl font-bold text-yellow-600">${totalScore.toFixed(2)}</div>
                  <div class="font-semibold text-gray-700 font-hind text-xs sm:text-xs md:text-sm">‡¶Æ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞</div>
                </div>
              </div>
              <div class="bg-gradient-to-r from-orange-100 to-orange-200 border-2 border-orange-300 p-2 sm:p-3 md:p-4 rounded-xl text-center">
                <div class="text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl font-bold text-orange-700 mb-1 sm:mb-2">
                  <i class="fas fa-percentage mr-1 sm:mr-2 text-sm sm:text-base md:text-lg" aria-hidden="true"></i> ${percentage.toFixed(2)}%
                </div>
                <div class="text-sm sm:text-base md:text-lg font-semibold text-orange-800 font-hind">‡¶∏‡¶æ‡¶∞‡ßç‡¶¨‡¶ø‡¶ï ‡¶∂‡¶§‡¶æ‡¶Ç‡¶∂</div>
              </div>
            </div>
          `;
          this.currentResults = {
            userAnswers,
            correctAnswers,
            totalScore,
            percentage,
          };
        }
        saveTest() {
          if (!this.currentResults) {
            alert("‡¶ï‡ßã‡¶® ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶®‡ßá‡¶á ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§");
            return;
          }

          const testData = {
            name: this.testData.name,
            totalQ: this.testData.mcqNumber,
            marksPerQ: this.testData.marksPerQuestion,
            negMark: this.testData.negativeMarkingValue,
            timeLim: this.testData.timeLimit,
            userAns: this.currentResults.userAnswers,
            correctAns: this.currentResults.correctAnswers,
            date: new Date().toISOString(),
          };

          const tests = this.safeLocalStorageGet("examHistory", []);
          tests.push(testData);

          if (this.safeLocalStorageSet("examHistory", tests)) {
            alert("‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
          }
        }

        loadHistory() {
          const tests = this.safeLocalStorageGet("examHistory", []);
          const container = document.getElementById("history-container");

          if (!container) return;

          container.innerHTML = "";

          if (tests.length === 0) {
            container.innerHTML =
              '<p class="text-center text-gray-600">‡¶ï‡ßã‡¶® ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>';
            return;
          }

          tests.forEach((test, index) => {
            const div = document.createElement("div");
            div.className = "bg-white/80 p-4 rounded-lg shadow-md mb-4";
            div.innerHTML = `
              <h3 class="font-bold text-lg">${this.escapeHtml(test.name)}</h3>
              <p>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${new Date(test.date).toLocaleString()}</p>
              <p>‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®: ${test.totalQ}, ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: ${test.marksPerQ}, ‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç: ${test.negMark}, ‡¶∏‡¶Æ‡¶Ø‡¶º: ${test.timeLim} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</p>
              <button class="mt-2 px-4 py-2 bg-blue-500 text-white rounded mr-2 retake-btn" data-index="${index}" aria-label="Retake test ${index + 1}">‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ</button>
              <button class="mt-2 px-4 py-2 bg-red-500 text-white rounded delete-btn" data-index="${index}" aria-label="Delete test ${index + 1}">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
            `;
            container.appendChild(div);
          });
          container.querySelectorAll(".retake-btn").forEach((btn) => {
            btn.addEventListener("click", (e) => {
              const index = parseInt(e.target.dataset.index);
              this.retakeTest(index);
            });
          });

          container.querySelectorAll(".delete-btn").forEach((btn) => {
            btn.addEventListener("click", (e) => {
              const index = parseInt(e.target.dataset.index);
              this.deleteTest(index);
            });
          });
        }

        deleteTest(index) {
          const tests = this.safeLocalStorageGet("examHistory", []);
          if (index >= 0 && index < tests.length) {
            tests.splice(index, 1);
            this.safeLocalStorageSet("examHistory", tests);
            this.loadHistory();
          }
        }

        retakeTest(index) {
          const tests = this.safeLocalStorageGet("examHistory", []);
          const test = tests[index];

          if (!test) return;

          this.retakeData = test;
          this.testData = {
            name: test.name,
            mcqNumber: test.totalQ,
            marksPerQuestion: test.marksPerQ,
            negativeMarkingValue: test.negMark,
            timeLimit: test.timeLim,
          };
          document.getElementById("test-name").value = test.name;
          document.getElementById("mcq-number").value = test.totalQ;
          document.getElementById("marks-per-question").value = test.marksPerQ;
          document.getElementById("negative-marking-value").value =
            test.negMark;
          document.getElementById("time-limit").value = test.timeLim;
          this.showSection("test-section");
          this.generateTestInterface();
          this.startTimer();
        }
        escapeHtml(text) {
          const div = document.createElement("div");
          div.textContent = text;
          return div.innerHTML;
        }
        setupEventListeners() {
          this.addEventListener("test-form", "submit", (e) =>
            this.handleFormSubmit(e),
          );
          this.addEventListener("view-history", "click", () => {
            this.showSection("history-section");
            this.loadHistory();
          });

          this.addEventListener("back-to-home", "click", () => {
            this.showSection("configuration-section");
          });
          this.addEventListener("submit-test", "click", () =>
            this.submitTest(),
          );
          this.addEventListener("submit-correct-answers", "click", () =>
            this.submitCorrectAnswers(),
          );
          this.addEventListener("save-test", "click", () => this.saveTest());

          this.addEventListener("print-result", "click", () => window.print());

          this.addEventListener("restart-btn", "click", () => {
            if (this.timer) {
              clearInterval(this.timer);
            }
            this.retakeData = null;
            this.showSection("configuration-section");
            document.getElementById("test-form").reset();
            document.getElementById("correct-answer-container").innerHTML = "";
            document.getElementById("mcq-container").innerHTML = "";
            document.getElementById("result-container").innerHTML = "";
          });
        }
      }
      document.addEventListener("DOMContentLoaded", () => {
        const hiddenSections = [
          "test-section",
          "correct-answer-section",
          "result-section",
          "history-section",
        ];
        hiddenSections.forEach((id) => {
          const element = document.getElementById(id);
          if (element && element.classList.contains("hidden")) {
            element.setAttribute("aria-hidden", "true");
          }
        });

        new ExamApp();
      });
    </script>
    <script>
      let mcqNumber = 0;
      let testName = "";
      let timeLimit = 0;
      let marksPerQuestion = 1;
      let negativeMarkingValue = 0.25;
      let retakeData = null;
      let timer;
      let saveListenerAttached = false;
      let printListenerAttached = false;

      function showSection(sectionId) {
        const sections = [
          "configuration-section",
          "test-section",
          "correct-answer-section",
          "result-section",
          "history-section",
        ];
        sections.forEach((id) => {
          const element = document.getElementById(id);
          if (element) {
            element.classList.add("hidden");
            element.setAttribute("aria-hidden", "true");
          }
        });
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
          targetSection.classList.remove("hidden");
          targetSection.removeAttribute("aria-hidden");
        }
      }

      function saveTest(
        name,
        totalQ,
        marksPerQ,
        negMark,
        timeLim,
        userAns,
        correctAns,
        date,
      ) {
        const tests = JSON.parse(localStorage.getItem("examHistory") || "[]");
        tests.push({
          name,
          totalQ,
          marksPerQ,
          negMark,
          timeLim,
          userAns,
          correctAns,
          date,
        });
        localStorage.setItem("examHistory", JSON.stringify(tests));
      }

      function loadHistory() {
        const tests = JSON.parse(localStorage.getItem("examHistory") || "[]");
        const container = document.getElementById("history-container");
        container.innerHTML = "";
        if (tests.length === 0) {
          container.innerHTML =
            "<p class='text-center text-gray-600'>‡¶ï‡ßã‡¶® ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>";
          return;
        }
        tests.forEach((test, index) => {
          const div = document.createElement("div");
          div.className = "bg-white/80 p-4 rounded-lg shadow-md mb-4";
          div.innerHTML = `
            <h3 class="font-bold text-lg">${test.name}</h3>
            <p>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${new Date(test.date).toLocaleString()}</p>
            <p>‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®: ${test.totalQ}, ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: ${test.marksPerQ}, ‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç: ${test.negMark}, ‡¶∏‡¶Æ‡¶Ø‡¶º: ${test.timeLim} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</p>
            <button class="mt-2 px-4 py-2 bg-blue-500 text-white rounded mr-2" onclick="retakeTest(${index})">‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ</button>
            <button class="mt-2 px-4 py-2 bg-red-500 text-white rounded" onclick="deleteTest(${index})">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
          `;
          container.appendChild(div);
        });
      }

      function deleteTest(index) {
        const tests = JSON.parse(localStorage.getItem("examHistory") || "[]");
        tests.splice(index, 1);
        localStorage.setItem("examHistory", JSON.stringify(tests));
        loadHistory();
      }

      function retakeTest(index) {
        const tests = JSON.parse(localStorage.getItem("examHistory") || "[]");
        const test = tests[index];
        if (!test) return;

        retakeData = test;
        testName = test.name;
        mcqNumber = test.totalQ;
        marksPerQuestion = test.marksPerQ;
        negativeMarkingValue = test.negMark;
        timeLimit = test.timeLim;
        document.getElementById("test-name").value = testName;
        document.getElementById("mcq-number").value = mcqNumber;
        document.getElementById("marks-per-question").value = marksPerQuestion;
        document.getElementById("negative-marking-value").value =
          negativeMarkingValue;
        document.getElementById("time-limit").value = timeLimit;
        showSection("test-section");
        const mcqContainer = document.getElementById("mcq-container");
        mcqContainer.innerHTML = "";
        for (let i = 1; i <= mcqNumber; i++) {
          const mcqDiv = document.createElement("div");
          mcqDiv.className =
            "flex flex-col md:flex-row md:items-center justify-between mb-3 sm:mb-4 md:mb-5 gap-2 sm:gap-2.5 md:gap-4 p-3 sm:p-4 md:p-5 border border-white/30 rounded-xl bg-white/80 glass-morphism shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5";
          mcqDiv.innerHTML = `
                    <p class="flex-1 md:mr-4 font-semibold text-gray-700 mb-2 md:mb-0 min-w-0 font-hind text-sm sm:text-base"><i class="fas fa-question-circle text-blue-600 mr-2"></i> ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${i}:</p>
                    <div class="flex gap-1 sm:gap-2 flex-wrap md:flex-nowrap items-center">
                        <input type="radio" name="q${i}" value="A" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0" ${test.userAns[i - 1] === "A" ? "checked" : ""}>
                        <input type="radio" name="q${i}" value="B" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0" ${test.userAns[i - 1] === "B" ? "checked" : ""}>
                        <input type="radio" name="q${i}" value="C" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0" ${test.userAns[i - 1] === "C" ? "checked" : ""}>
                        <input type="radio" name="q${i}" value="D" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0" ${test.userAns[i - 1] === "D" ? "checked" : ""}>
                    </div>
                `;
          mcqContainer.appendChild(mcqDiv);
        }
        const testDetails = document.getElementById("test-details");
        testDetails.innerHTML = `
          <div class="bg-blue-50 p-6 rounded-xl border border-blue-200">
            <h3 class="text-2xl font-bold text-blue-600 mb-6 text-center">
              <i class="fas fa-clipboard-list text-blue-600 mr-2"></i>
              ${testName}
              <i class="fas fa-clipboard-list text-blue-600 ml-2"></i>
            </h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
              <div class="bg-white p-4 rounded-lg border border-blue-200 text-center">
                <div class="bg-blue-500 text-white p-3 rounded-full mb-3 inline-block">
                  <i class="fas fa-list text-xl"></i>
                </div>
                <div class="font-semibold text-gray-700 text-sm mb-1">‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                <div class="text-2xl font-bold text-blue-600">${mcqNumber}</div>
              </div>
              <div class="bg-white p-4 rounded-lg border border-green-200 text-center">
                <div class="bg-green-500 text-white p-3 rounded-full mb-3 inline-block">
                  <i class="fas fa-hourglass-half text-xl"></i>
                </div>
                <div class="font-semibold text-gray-700 text-sm mb-1">‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ</div>
                <div class="text-2xl font-bold text-green-600">${timeLimit} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</div>
              </div>
              <div class="bg-white p-4 rounded-lg border border-yellow-200 text-center">
                <div class="bg-yellow-500 text-white p-3 rounded-full mb-3 inline-block">
                  <i class="fas fa-star text-xl"></i>
                </div>
                <div class="font-semibold text-gray-700 text-sm mb-1">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞</div>
                <div class="text-2xl font-bold text-yellow-600">${marksPerQuestion}</div>
              </div>
              <div class="bg-white p-4 rounded-lg border border-red-200 text-center">
                <div class="bg-red-500 text-white p-3 rounded-full mb-3 inline-block">
                  <i class="fas fa-exclamation-triangle text-xl"></i>
                </div>
                <div class="font-semibold text-gray-700 text-sm mb-1">‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç</div>
                <div class="text-2xl font-bold text-red-600">${negativeMarkingValue > 0 ? negativeMarkingValue : "‡¶¨‡¶®‡ßç‡¶ß"}</div>
              </div>
            </div>
          </div>
        `;
        const timerDisplay = document.getElementById("timer");
        let timeRemaining = timeLimit * 60;
        if (timer) clearInterval(timer);
        timer = setInterval(() => {
          const minutes = Math.floor(timeRemaining / 60);
          const seconds = timeRemaining % 60;
          timerDisplay.textContent = `‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º: ${minutes}‡¶Æ‡¶ø ${seconds}‡¶∏‡ßá`;
          timeRemaining--;
          if (timeRemaining < 0) {
            clearInterval(timer);
            timerDisplay.textContent = "‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑!";
            alert("‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑! ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá‡•§");
            document.getElementById("submit-test").click();
          }
        }, 1000);
      }
      document
        .getElementById("view-history")
        .addEventListener("click", function () {
          showSection("history-section");
          loadHistory();
        });
      document
        .getElementById("back-to-home")
        .addEventListener("click", function () {
          showSection("configuration-section");
        });
      showSection("configuration-section");

      document
        .getElementById("test-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          testName = document.getElementById("test-name").value;
          mcqNumber = parseInt(document.getElementById("mcq-number").value);
          timeLimit = parseInt(document.getElementById("time-limit").value);
          marksPerQuestion = parseFloat(
            document.getElementById("marks-per-question").value,
          );
          negativeMarkingValue = parseFloat(
            document.getElementById("negative-marking-value").value,
          );

          showSection("test-section");

          const testDetails = document.getElementById("test-details");
          testDetails.innerHTML = `
            <div class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6 md:p-8 rounded-2xl shadow-2xl border border-white/50">
              <h3 class="text-2xl md:text-3xl font-bold text-blue-600 mb-6 font-hind text-center flex items-center justify-center gap-3">
                <i class="fas fa-clipboard-list text-3xl text-blue-600" aria-hidden="true"></i>
                ${testName}
                <i class="fas fa-clipboard-list text-3xl text-blue-600" aria-hidden="true"></i>
              </h3>
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
                <div class="group bg-gradient-to-br from-white to-blue-50 p-4 md:p-6 rounded-xl shadow-lg border border-blue-200 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                  <div class="flex flex-col items-center text-center">
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-full mb-3 shadow-lg group-hover:scale-110 transition-transform duration-300">
                      <i class="fas fa-list text-white text-xl md:text-2xl" aria-hidden="true"></i>
                    </div>
                    <div class="font-semibold text-gray-700 font-hind text-sm md:text-base mb-1">‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                    <div class="text-2xl md:text-3xl font-bold text-blue-600">${mcqNumber}</div>
                  </div>
                </div>
                <div class="group bg-gradient-to-br from-white to-green-50 p-4 md:p-6 rounded-xl shadow-lg border border-green-200 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                  <div class="flex flex-col items-center text-center">
                    <div class="bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-full mb-3 shadow-lg group-hover:scale-110 transition-transform duration-300">
                      <i class="fas fa-hourglass-half text-white text-xl md:text-2xl" aria-hidden="true"></i>
                    </div>
                    <div class="font-semibold text-gray-700 font-hind text-sm md:text-base mb-1">‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ</div>
                    <div class="text-2xl md:text-3xl font-bold text-green-600">${timeLimit} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</div>
                  </div>
                </div>
                <div class="group bg-gradient-to-br from-white to-yellow-50 p-4 md:p-6 rounded-xl shadow-lg border border-yellow-200 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                  <div class="flex flex-col items-center text-center">
                    <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 p-3 rounded-full mb-3 shadow-lg group-hover:scale-110 transition-transform duration-300">
                      <i class="fas fa-star text-white text-xl md:text-2xl" aria-hidden="true"></i>
                    </div>
                    <div class="font-semibold text-gray-700 font-hind text-sm md:text-base mb-1">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞</div>
                    <div class="text-2xl md:text-3xl font-bold text-yellow-600">${marksPerQuestion}</div>
                  </div>
                </div>
                <div class="group bg-gradient-to-br from-white to-red-50 p-4 md:p-6 rounded-xl shadow-lg border border-red-200 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                  <div class="flex flex-col items-center text-center">
                    <div class="bg-gradient-to-br from-red-500 to-red-600 p-3 rounded-full mb-3 shadow-lg group-hover:scale-110 transition-transform duration-300">
                      <i class="fas fa-exclamation-triangle text-white text-xl md:text-2xl" aria-hidden="true"></i>
                    </div>
                    <div class="font-semibold text-gray-700 font-hind text-sm md:text-base mb-1">‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç</div>
                    <div class="text-2xl md:text-3xl font-bold text-red-600">${negativeMarkingValue > 0 ? negativeMarkingValue : "‡¶¨‡¶®‡ßç‡¶ß"}</div>
                  </div>
                </div>
              </div>
            </div>
        `;
          const timerDisplay = document.getElementById("timer");
          let timeRemaining = timeLimit * 60;
          timer = setInterval(() => {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            timerDisplay.textContent = `‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º: ${minutes}‡¶Æ‡¶ø ${seconds}‡¶∏‡ßá`;
            timeRemaining--;

            if (timeRemaining < 0) {
              clearInterval(timer);
              timerDisplay.textContent = "‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑!";
              alert("‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑! ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá‡•§");
              document.getElementById("submit-test").click();
            }
          }, 1000);

          const mcqContainer = document.getElementById("mcq-container");
          mcqContainer.innerHTML = "";
          for (let i = 1; i <= mcqNumber; i++) {
            const mcqDiv = document.createElement("div");
            mcqDiv.className =
              "flex flex-col md:flex-row md:items-center justify-between mb-3 sm:mb-4 md:mb-5 gap-2 sm:gap-2.5 md:gap-4 p-3 sm:p-4 md:p-5 border border-white/30 rounded-xl bg-white/80 glass-morphism shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5";
            mcqDiv.innerHTML = `
                    <p class="flex-1 md:mr-4 font-semibold text-gray-700 mb-2 md:mb-0 min-w-0 font-hind text-sm sm:text-base"><i class="fas fa-question-circle text-blue-600 mr-2"></i> ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${i}:</p>
                    <div class="flex gap-1 sm:gap-2 flex-wrap md:flex-nowrap items-center">
                        <input type="radio" name="q${i}" value="A" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0">
                        <input type="radio" name="q${i}" value="B" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0">
                        <input type="radio" name="q${i}" value="C" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0">
                        <input type="radio" name="q${i}" value="D" class="radio-custom w-5 h-5 sm:w-6 sm:h-6 relative m-1 sm:m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[20px] sm:min-w-[24px] flex-shrink-0">
                    </div>
                `;
            mcqContainer.appendChild(mcqDiv);
          }
        });

      document
        .getElementById("submit-test")
        .addEventListener("click", function () {
          showSection("correct-answer-section");

          const correctAnswerContainer = document.getElementById(
            "correct-answer-container",
          );
          correctAnswerContainer.innerHTML = "";
          for (let i = 1; i <= mcqNumber; i++) {
            const answerDiv = document.createElement("div");
            answerDiv.className =
              "flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-5 gap-2.5 md:gap-4 p-4 md:p-5 border border-white/30 rounded-xl bg-white/80 glass-morphism shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5";
            answerDiv.innerHTML = `
                    <p class="flex-1 md:mr-4 font-semibold text-gray-700 mb-2.5 md:mb-0 min-w-0 font-hind"><i class="fas fa-check-circle text-blue-600 mr-2"></i> ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${i} ‡¶è‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞:</p>
                    <div class="flex gap-2 flex-wrap md:flex-nowrap items-center">
                        <input type="radio" name="correct-q${i}" value="A" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${retakeData && retakeData.correctAns[i - 1] === "A" ? "checked" : ""}>
                        <input type="radio" name="correct-q${i}" value="B" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${retakeData && retakeData.correctAns[i - 1] === "B" ? "checked" : ""}>
                        <input type="radio" name="correct-q${i}" value="C" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${retakeData && retakeData.correctAns[i - 1] === "C" ? "checked" : ""}>
                        <input type="radio" name="correct-q${i}" value="D" class="radio-custom w-6 h-6 relative m-2 cursor-pointer appearance-none border-2 border-gray-300 rounded-full bg-white transition-all duration-300 hover:border-blue-600 hover:scale-105 focus:outline-2 focus:outline-blue-600 focus:outline-offset-2 min-w-[24px] flex-shrink-0" ${retakeData && retakeData.correctAns[i - 1] === "D" ? "checked" : ""}>
                    </div>
                `;
            correctAnswerContainer.appendChild(answerDiv);
          }
        });

      document
        .getElementById("submit-correct-answers")
        .addEventListener("click", function () {
          showSection("result-section");

          const resultContainer = document.getElementById("result-container");
          let correctCount = 0;
          let incorrectCount = 0;
          let skippedCount = 0;

          for (let i = 1; i <= mcqNumber; i++) {
            const userAnswer = document.querySelector(
              `input[name="q${i}"]:checked`,
            );
            const correctAnswer = document.querySelector(
              `input[name="correct-q${i}"]:checked`,
            );
            if (!userAnswer) {
              skippedCount++;
            } else if (userAnswer && correctAnswer) {
              if (userAnswer.value === correctAnswer.value) {
                correctCount++;
              } else {
                incorrectCount++;
              }
            }
          }

          const negativeMarking = negativeMarkingValue;
          const totalScore =
            correctCount * marksPerQuestion - incorrectCount * negativeMarking;

          resultContainer.innerHTML = `
            <div class="bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-500 p-4 md:p-6 rounded-xl shadow-xl">
                <h3 class="text-gray-800 font-bold mb-6 font-hind text-xl md:text-2xl text-center"><i class="fas fa-chart-pie text-blue-600 mr-2"></i> ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤</h3>
                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-6">
                    <div class="bg-white/90 p-2 sm:p-4 rounded-lg shadow-md text-center">
                        <i class="fas fa-list text-blue-600 text-xl sm:text-3xl mb-1 sm:mb-2 block"></i>
                        <div class="text-lg sm:text-2xl font-bold text-blue-600">${mcqNumber}</div>
                        <div class="font-semibold text-gray-700 font-hind text-xs sm:text-sm">‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                    </div>
                    <div class="bg-white/90 p-2 sm:p-4 rounded-lg shadow-md text-center">
                        <i class="fas fa-check-circle text-green-600 text-xl sm:text-3xl mb-1 sm:mb-2 block"></i>
                        <div class="text-lg sm:text-2xl font-bold text-green-600">${correctCount}</div>
                        <div class="font-semibold text-gray-700 font-hind text-xs sm:text-sm">‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞</div>
                    </div>
                    <div class="bg-white/90 p-2 sm:p-4 rounded-lg shadow-md text-center">
                        <i class="fas fa-times-circle text-red-600 text-xl sm:text-3xl mb-1 sm:mb-2 block"></i>
                        <div class="text-lg sm:text-2xl font-bold text-red-600">${incorrectCount}</div>
                        <div class="font-semibold text-gray-700 font-hind text-xs sm:text-sm">‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞</div>
                    </div>
                    <div class="bg-white/90 p-2 sm:p-4 rounded-lg shadow-md text-center">
                        <i class="fas fa-minus-circle text-orange-600 text-xl sm:text-3xl mb-1 sm:mb-2 block"></i>
                        <div class="text-lg sm:text-2xl font-bold text-orange-600">${skippedCount}</div>
                        <div class="font-semibold text-gray-700 font-hind text-xs sm:text-sm">‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</div>
                    </div>
                    <div class="bg-white/90 p-2 sm:p-4 rounded-lg shadow-md text-center">
                        <i class="fas fa-exclamation-triangle text-purple-600 text-xl sm:text-3xl mb-1 sm:mb-2 block"></i>
                        <div class="text-lg sm:text-2xl font-bold text-purple-600">${(
                          incorrectCount * negativeMarking
                        ).toFixed(2)}</div>
                        <div class="font-semibold text-gray-700 font-hind text-xs sm:text-sm">‡¶®‡ßá‡¶ó‡ßá‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶ø‡¶Ç</div>
                    </div>
                    <div class="bg-white/90 p-2 sm:p-4 rounded-lg shadow-md text-center">
                        <i class="fas fa-trophy text-yellow-600 text-xl sm:text-3xl mb-1 sm:mb-2 block"></i>
                        <div class="text-lg sm:text-2xl font-bold text-yellow-600">${totalScore.toFixed(
                          2,
                        )}</div>
                        <div class="font-semibold text-gray-700 font-hind text-xs sm:text-sm">‡¶Æ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞</div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-orange-100 to-orange-200 border-2 border-orange-300 p-3 sm:p-4 rounded-xl text-center">
                    <div class="text-2xl sm:text-3xl md:text-4xl font-bold text-orange-700 mb-2">
                        <i class="fas fa-percentage mr-2"></i> ${(
                          (correctCount / mcqNumber) *
                          100
                        ).toFixed(2)}%
                    </div>
                    <div class="text-base sm:text-lg font-semibold text-orange-800 font-hind">‡¶∏‡¶æ‡¶∞‡ßç‡¶¨‡¶ø‡¶ï ‡¶∂‡¶§‡¶æ‡¶Ç‡¶∂</div>
                </div>
            </div>
        `;
          document
            .getElementById("print-result")
            .addEventListener("click", function () {
              window.print();
            });
          let userAnswers = [];
          let correctAnswers = [];
          for (let i = 1; i <= mcqNumber; i++) {
            const userAns = document.querySelector(
              `input[name="q${i}"]:checked`,
            );
            userAnswers.push(userAns ? userAns.value : "");
            const correctAns = document.querySelector(
              `input[name="correct-q${i}"]:checked`,
            );
            correctAnswers.push(correctAns ? correctAns.value : "");
          }
          document
            .getElementById("save-test")
            .addEventListener("click", function () {
              let userAnswers = [];
              let correctAnswers = [];
              for (let i = 1; i <= mcqNumber; i++) {
                const userAns = document.querySelector(
                  `input[name="q${i}"]:checked`,
                );
                userAnswers.push(userAns ? userAns.value : "");
                const correctAns = document.querySelector(
                  `input[name="correct-q${i}"]:checked`,
                );
                correctAnswers.push(correctAns ? correctAns.value : "");
              }
              saveTest(
                testName,
                mcqNumber,
                marksPerQuestion,
                negativeMarkingValue,
                timeLimit,
                userAnswers,
                correctAnswers,
                new Date().toISOString(),
              );
              alert("‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
            });
        });
    </script>


  </body>
</html>
